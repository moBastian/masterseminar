<p class="lead text-right">
  <%= link_to user_group_students_path(@user, @group, :format => :pdf), :title => "Zugangsdaten der Klasse", :target => "blank" do %>
      <span class="glyphicon glyphicon-print"></span>
  <% end %>
</p>
<%  students = @group.students
    groupsize = students.size
    controllgroupsize = @group.students.where(group_type: 0).size
    testgroup1Size = @group.students.where(group_type: 1).size
    testgroup2Size = @group.students.where(group_type: 2).size
    testgroup3Size = @group.students.where(group_type: 3).size
    testgroup4Size = @group.students.where(group_type: 4).size
    testgroup5Size = @group.students.where(group_type: 5).size%>
<div>
  <table class="table table-striped">
    <thead>
    <th>

    </th>
    <th>
      Probanden insgesamt
    </th>
    <th>
      Probanden in Kontrollgruppe
    </th>
    <th>
      Probanden in Gruppe 1
    </th>
    <th>
      Probanden in Gruppe 2
    </th>
    <th>
      Probanden in Gruppe 3
    </th>
    <th>
      Probanden in Gruppe 4
    </th>
    <th>
      Probanden in Gruppe 5
    </th>
    </thead>
    <tbody>
    <tr>
      <td>Numerisch</td>
      <td>
        <%= groupsize%>
      </td>
      <td>
        <%= controllgroupsize%>
      </td>
      <td>
        <%= testgroup1Size%>
      </td>
      <td>
        <%= testgroup2Size%>
      </td>
      <td>
        <%= testgroup3Size%>
      </td>
      <td>
        <%= testgroup4Size%>
      </td>
      <td>
        <%= testgroup5Size%>
      </td>
    </tr>
    <tr>
      <td>Prozentual (in %)</td>
      <td>
        100
      </td>
      <td>
        <%= (controllgroupsize.to_f/groupsize).round(3)*100%>
      </td>
      <td>
        <%= (testgroup1Size.to_f/groupsize).round(3)*100%>
      </td>
      <td>
        <%= (testgroup2Size.to_f/groupsize).round(3)*100%>
      </td>
      <td>
        <%= (testgroup3Size.to_f/groupsize).round(3)*100%>
      </td>
      <td>
        <%= (testgroup4Size.to_f/groupsize).round(3)*100%>
      </td>
      <td>
        <%= (testgroup5Size.to_f/groupsize).round(3)*100%>
      </td>
    </tr>
    </tbody>
  </table>







</div>
<br/>
<table class="table table-striped">
  <thead>
  <th>
    Nutzer
  </th>
  <th>
    Login-Code
  </th>
  <th>
    Probandengruppe
  </th>
  <th>
    Geschlecht
  </th>

  <th>
    Insgesamte Messungen
  </th>
  <th>
    Aktion
  </th>
  </thead>
  <tbody>
  <% students.sort_by { |a| a.id}.each do |student| %>
      <tr>
        <td>
          <%= student.id %>
        </td>
        <td>
          <%= student.login %>
        </td>
        <td>
          <%= student.group_type %>
        </td>
        <td>
          <%= raw(student.get_gender) %>
        </td>
        <td>
          <%= link_to user_group_student_path(@user, @group, student), :data => {:remote => true} do %>
            <%= (student.results.map{|x| x.score} - [nil]).size %>
          <% end %>
        </td>
        <td>
            <%= link_to edit_user_group_student_path(@user, @group, student), :data => {:remote => true} do %>
                <span class="glyphicon glyphicon-pencil"></span>
            <% end %>
            <%= link_to user_group_student_path(@user, @group, student), :method => :delete, :data => {:remote => true, :confirm => "Sind Sie sicher?"} do %>
                <span class="glyphicon glyphicon-trash"></span>
            <% end %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>
<div id="studentForm">
  <%= link_to "Schüler/-in hinzufügen", new_user_group_student_path(@user, @group), :class => "btn btn-default", :data => {:remote => true} %>
</div>
